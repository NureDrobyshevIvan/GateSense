@startuml
left to right direction
skinparam actorStyle awesome

actor "Garage Owner" as Owner
actor "Family Member" as Family
actor "Guest User" as Guest
actor "Coop Admin" as CoopAdmin
actor "IoT Controller" as Device

rectangle "GateSense Server API" {
  usecase UC_Register as "Register account"
  usecase UC_Login as "Authenticate / refresh session"
  usecase UC_Logout as "Logout"
  usecase UC_ControlGate as "Control gate (open / close)"
  usecase UC_ViewStatus as "Query gate state"
  usecase UC_MonitorSensors as "Monitor CO / smoke alerts"
  usecase UC_ViewLog as "View access & sensor log"
  usecase UC_ManageAccess as "Manage digital access keys"
  usecase UC_GuestKey as "Generate guest link"
  usecase UC_FamilyAccess as "Assign family access"
  usecase UC_RevokeKey as "Revoke issued key"
  usecase UC_AdminManage as "Manage residents & garages"
  usecase UC_AdminLogs as "Review aggregated logs"
  usecase UC_GuestEntry as "Use guest link"
  usecase UC_ReportSensor as "Publish sensor readings"
  usecase UC_ReportGate as "Publish gate state heartbeat"
  usecase UC_RunCommand as "Execute gate command"
}

Owner --> UC_Register
Owner --> UC_ManageAccess
Owner --> UC_ViewLog
Owner --> UC_ControlGate
Owner --> UC_ViewStatus
Owner --> UC_MonitorSensors
Owner --> UC_Login
Owner --> UC_Logout

Family --> UC_Login
Family --> UC_ControlGate
Family --> UC_ViewStatus
Family --> UC_MonitorSensors
Family --> UC_Logout

Guest --> UC_GuestEntry

CoopAdmin --> UC_AdminManage
CoopAdmin --> UC_AdminLogs
CoopAdmin --> UC_ViewLog
CoopAdmin --> UC_MonitorSensors

Device --> UC_ReportSensor
Device --> UC_ReportGate
Device --> UC_RunCommand

UC_ManageAccess --> UC_GuestKey : <<include>>
UC_ManageAccess --> UC_FamilyAccess : <<include>>
UC_ManageAccess --> UC_RevokeKey : <<include>>
UC_ControlGate <-- UC_RunCommand : <<include>>
UC_MonitorSensors <-- UC_ReportSensor : <<include>>
UC_ViewStatus <-- UC_ReportGate : <<include>>
UC_GuestEntry --> UC_ControlGate : <<include>>

@enduml

